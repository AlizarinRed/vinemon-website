/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/fast-average-color@9.4.0/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/*! Fast Average Color | Â© 2023 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */
"use strict";function toHex(r){var e=r.toString(16);return 1===e.length?"0"+e:e}function arrayToHex(r){return"#"+r.map(toHex).join("")}function isDark(r){return(299*r[0]+587*r[1]+114*r[2])/1e3<128}function prepareIgnoredColor(r){return r?isRGBArray(r)?r:[r]:[]}function isRGBArray(r){return Array.isArray(r[0])}function isIgnoredColor(r,e,t){for(var n=0;n<t.length;n++)if(isIgnoredColorAsNumbers(r,e,t[n]))return!0;return!1}function isIgnoredColorAsNumbers(r,e,t){switch(t.length){case 3:if(isIgnoredRGBColor(r,e,t))return!0;break;case 4:if(isIgnoredRGBAColor(r,e,t))return!0;break;case 5:if(isIgnoredRGBAColorWithThreshold(r,e,t))return!0;break;default:return!1}}function isIgnoredRGBColor(r,e,t){return 255!==r[e+3]||r[e]===t[0]&&r[e+1]===t[1]&&r[e+2]===t[2]}function isIgnoredRGBAColor(r,e,t){return r[e+3]&&t[3]?r[e]===t[0]&&r[e+1]===t[1]&&r[e+2]===t[2]&&r[e+3]===t[3]:r[e+3]===t[3]}function inRange(r,e,t){return r>=e-t&&r<=e+t}function isIgnoredRGBAColorWithThreshold(r,e,t){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=r[e+3],c=inRange(u,a,s);return a?!(u||!c)||!!(inRange(r[e],n,s)&&inRange(r[e+1],o,s)&&inRange(r[e+2],i,s)&&c):c}var DEFAULT_DOMINANT_DIVIDER=24;function dominantAlgorithm(r,e,t){for(var n={},o=t.dominantDivider||DEFAULT_DOMINANT_DIVIDER,i=t.ignoredColor,a=t.step,s=[0,0,0,0,0],u=0;u<e;u+=a){var c=r[u],d=r[u+1],g=r[u+2],h=r[u+3];if(!i||!isIgnoredColor(r,u,i)){var l=Math.round(c/o)+","+Math.round(d/o)+","+Math.round(g/o);n[l]?n[l]=[n[l][0]+c*h,n[l][1]+d*h,n[l][2]+g*h,n[l][3]+h,n[l][4]+1]:n[l]=[c*h,d*h,g*h,h,1],s[4]<n[l][4]&&(s=n[l])}}var f=s[0],v=s[1],p=s[2],m=s[3],I=s[4];return m?[Math.round(f/m),Math.round(v/m),Math.round(p/m),Math.round(m/I)]:t.defaultColor}function simpleAlgorithm(r,e,t){for(var n=0,o=0,i=0,a=0,s=0,u=t.ignoredColor,c=t.step,d=0;d<e;d+=c){var g=r[d+3],h=r[d]*g,l=r[d+1]*g,f=r[d+2]*g;u&&isIgnoredColor(r,d,u)||(n+=h,o+=l,i+=f,a+=g,s++)}return a?[Math.round(n/a),Math.round(o/a),Math.round(i/a),Math.round(a/s)]:t.defaultColor}function sqrtAlgorithm(r,e,t){for(var n=0,o=0,i=0,a=0,s=0,u=t.ignoredColor,c=t.step,d=0;d<e;d+=c){var g=r[d],h=r[d+1],l=r[d+2],f=r[d+3];u&&isIgnoredColor(r,d,u)||(n+=g*g*f,o+=h*h*f,i+=l*l*f,a+=f,s++)}return a?[Math.round(Math.sqrt(n/a)),Math.round(Math.sqrt(o/a)),Math.round(Math.sqrt(i/a)),Math.round(a/s)]:t.defaultColor}function getDefaultColor(r){return getOption(r,"defaultColor",[0,0,0,0])}function getOption(r,e,t){return void 0===r[e]?t:r[e]}var MIN_SIZE=10,MAX_SIZE=100;function isSvg(r){return-1!==r.search(/\.svg(\?|$)/i)}function getOriginalSize(r){if(isInstanceOfHTMLImageElement(r)){var e=r.naturalWidth,t=r.naturalHeight;return!r.naturalWidth&&isSvg(r.src)&&(e=t=MAX_SIZE),{width:e,height:t}}return isInstanceOfHTMLVideoElement(r)?{width:r.videoWidth,height:r.videoHeight}:{width:r.width,height:r.height}}function getSrc(r){return isInstanceOfHTMLCanvasElement(r)?"canvas":isInstanceOfOffscreenCanvas(r)?"offscreencanvas":isInstanceOfImageBitmap(r)?"imagebitmap":r.src}function isInstanceOfHTMLImageElement(r){return"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement}var hasOffscreenCanvas="undefined"!=typeof OffscreenCanvas;function isInstanceOfOffscreenCanvas(r){return hasOffscreenCanvas&&r instanceof OffscreenCanvas}function isInstanceOfHTMLVideoElement(r){return"undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement}function isInstanceOfHTMLCanvasElement(r){return"undefined"!=typeof HTMLCanvasElement&&r instanceof HTMLCanvasElement}function isInstanceOfImageBitmap(r){return"undefined"!=typeof ImageBitmap&&r instanceof ImageBitmap}function prepareSizeAndPosition(r,e){var t,n=getOption(e,"left",0),o=getOption(e,"top",0),i=getOption(e,"width",r.width),a=getOption(e,"height",r.height),s=i,u=a;return"precision"===e.mode||(i>a?(t=i/a,s=MAX_SIZE,u=Math.round(s/t)):(t=a/i,u=MAX_SIZE,s=Math.round(u/t)),(s>i||u>a||s<MIN_SIZE||u<MIN_SIZE)&&(s=i,u=a)),{srcLeft:n,srcTop:o,srcWidth:i,srcHeight:a,destWidth:s,destHeight:u}}var isWebWorkers="undefined"==typeof window;function makeCanvas(){return isWebWorkers?hasOffscreenCanvas?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var ERROR_PREFIX="FastAverageColor: ";function getError(r){return Error(ERROR_PREFIX+r)}function outputError(r,e){e||console.error(r)}var FastAverageColor=function(){function r(){this.canvas=null,this.ctx=null}return r.prototype.getColorAsync=function(r,e){if(!r)return Promise.reject(getError("call .getColorAsync() without resource"));if("string"==typeof r){if("undefined"==typeof Image)return Promise.reject(getError("resource as string is not supported in this environment"));var t=new Image;return t.crossOrigin=e&&e.crossOrigin||"",t.src=r,this.bindImageEvents(t,e)}if(isInstanceOfHTMLImageElement(r)&&!r.complete)return this.bindImageEvents(r,e);var n=this.getColor(r,e);return n.error?Promise.reject(n.error):Promise.resolve(n)},r.prototype.getColor=function(r,e){var t=getDefaultColor(e=e||{});if(!r)return outputError(i=getError("call .getColor() without resource"),e.silent),this.prepareResult(t,i);var n=prepareSizeAndPosition(getOriginalSize(r),e);if(!(n.srcWidth&&n.srcHeight&&n.destWidth&&n.destHeight))return outputError(i=getError('incorrect sizes for resource "'.concat(getSrc(r),'"')),e.silent),this.prepareResult(t,i);if(!this.canvas&&(this.canvas=makeCanvas(),!this.canvas))return outputError(i=getError("OffscreenCanvas is not supported in this browser"),e.silent),this.prepareResult(t,i);if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx)return outputError(i=getError("Canvas Context 2D is not supported in this browser"),e.silent),this.prepareResult(t);this.ctx.imageSmoothingEnabled=!1}this.canvas.width=n.destWidth,this.canvas.height=n.destHeight;try{this.ctx.clearRect(0,0,n.destWidth,n.destHeight),this.ctx.drawImage(r,n.srcLeft,n.srcTop,n.srcWidth,n.srcHeight,0,0,n.destWidth,n.destHeight);var o=this.ctx.getImageData(0,0,n.destWidth,n.destHeight).data;return this.prepareResult(this.getColorFromArray4(o,e))}catch(n){var i;return outputError(i=getError("security error (CORS) for resource ".concat(getSrc(r),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image")),e.silent),!e.silent&&console.error(n),this.prepareResult(t,i)}},r.prototype.getColorFromArray4=function(r,e){e=e||{};var t=r.length,n=getDefaultColor(e);if(t<4)return n;var o,i=t-t%4,a=4*(e.step||1);switch(e.algorithm||"sqrt"){case"simple":o=simpleAlgorithm;break;case"sqrt":o=sqrtAlgorithm;break;case"dominant":o=dominantAlgorithm;break;default:throw getError("".concat(e.algorithm," is unknown algorithm"))}return o(r,i,{defaultColor:n,ignoredColor:prepareIgnoredColor(e.ignoredColor),step:a,dominantDivider:e.dominantDivider})},r.prototype.prepareResult=function(r,e){var t=r.slice(0,3),n=[r[0],r[1],r[2],r[3]/255],o=isDark(r);return{value:[r[0],r[1],r[2],r[3]],rgb:"rgb("+t.join(",")+")",rgba:"rgba("+n.join(",")+")",hex:arrayToHex(t),hexa:arrayToHex(r),isDark:o,isLight:!o,error:e}},r.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},r.prototype.bindImageEvents=function(r,e){var t=this;return new Promise((function(n,o){var i=function(){u();var i=t.getColor(r,e);i.error?o(i.error):n(i)},a=function(){u(),o(getError('Error loading image "'.concat(r.src,'"')))},s=function(){u(),o(getError('Image "'.concat(r.src,'" loading aborted')))},u=function(){r.removeEventListener("load",i),r.removeEventListener("error",a),r.removeEventListener("abort",s)};r.addEventListener("load",i),r.addEventListener("error",a),r.addEventListener("abort",s)}))},r}();exports.FastAverageColor=FastAverageColor;
//# sourceMappingURL=/sm/83b06ca487647bf9d04bfbde649c8374394a26b3a63bace330c68818397dbea3.map